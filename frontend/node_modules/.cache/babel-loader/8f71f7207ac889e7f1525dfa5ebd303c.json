{"ast":null,"code":"var _jsxFileName = \"/home/bryan/Programa\\xE7\\xE3o/WebDev/Portifolio - Bryan Diniz/web/src/pages/Projects/Chat/Test/index.js\";\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\nimport { shade, lighten, desaturate, invert, getContrast } from \"polished\";\nimport socket from \"../../../../services/socket\";\nimport { Container, MessageContainer, Message, MessageUser, MessageText, MessageDate, InputGroup, InputText, LabelInput, InputMessage, SendButtonInput } from './styles';\n\nfunction Chat() {\n  const [messages, setMessages] = useState([]);\n  const [recivedMessage, setRecivedMessage] = useState(null);\n  const [myIdMessage, setMyIdMessage] = useState(0);\n  const [messageColor, setMessageColor] = useState('');\n  const [textColor, setTextColor] = useState('');\n  const messageText = useRef();\n  const username = useRef();\n  useMemo(() => {\n    socket.on('recivedMessage', message => {\n      message.from = 'others';\n      setRecivedMessage(message);\n      console.log(message);\n    });\n  }, []);\n  useEffect(() => {\n    if (recivedMessage) {\n      setMessages([...messages, recivedMessage]);\n      const messageDiv = document.getElementById('messageContainer');\n      messageDiv.scrollTop = messageDiv.scrollHeight;\n    }\n  }, [recivedMessage]);\n  useEffect(() => {\n    getRandomColor();\n  }, []);\n\n  function getRandomColor() {\n    let backgroundColor = '#' + (0x1000000 + Math.random() * 0xffffff).toString(16).substr(1, 6);\n    backgroundColor = desaturate(0.2, lighten(0.2, backgroundColor));\n    let textColor = getConstrastColor(backgroundColor);\n    setMessageColor(backgroundColor);\n    setTextColor(textColor);\n  }\n\n  function getConstrastColor(color) {\n    if (getContrast(color, '#fff') < 5.0) return '#3d3d3d';else return '#dedede';\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    setMyIdMessage(myIdMessage - 1);\n    const date = new Date().toTimeString().replace(/.*(\\d{2}:\\d{2}:\\d{2}).*/, \"$1\");\n    ;\n    const newMessage = {\n      from: 'my',\n      id: myIdMessage,\n      username: username.current.value,\n      text: messageText.current.value,\n      backgroundColor: messageColor,\n      textColor: textColor,\n      date\n    };\n    setMessages([...messages, newMessage]);\n    socket.emit('sendMessage', newMessage);\n    messageText.current.value = '';\n  }\n\n  return React.createElement(Container, {\n    autoComplete: \"off\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(InputGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(LabelInput, {\n    htmlFor: \"username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Username\"), React.createElement(InputText, {\n    id: \"username\",\n    ref: username,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  })), React.createElement(MessageContainer, {\n    id: \"messageContainer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, messages.map(m => React.createElement(Message, {\n    className: m.from,\n    key: m.id,\n    style: {\n      background: m.backgroundColor\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(MessageText, {\n    style: {\n      color: m.textColor\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(MessageUser, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, m.username, \":\"), m.text), React.createElement(MessageDate, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, m.date)))), React.createElement(InputGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(InputMessage, {\n    id: \"message\",\n    placeholder: \"Enviar mensagem...\",\n    ref: messageText,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), React.createElement(SendButtonInput, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"Enviar\")));\n}\n\nexport default Chat;","map":{"version":3,"sources":["/home/bryan/Programação/WebDev/Portifolio - Bryan Diniz/web/src/pages/Projects/Chat/Test/index.js"],"names":["React","useState","useEffect","useRef","useMemo","shade","lighten","desaturate","invert","getContrast","socket","Container","MessageContainer","Message","MessageUser","MessageText","MessageDate","InputGroup","InputText","LabelInput","InputMessage","SendButtonInput","Chat","messages","setMessages","recivedMessage","setRecivedMessage","myIdMessage","setMyIdMessage","messageColor","setMessageColor","textColor","setTextColor","messageText","username","on","message","from","console","log","messageDiv","document","getElementById","scrollTop","scrollHeight","getRandomColor","backgroundColor","Math","random","toString","substr","getConstrastColor","color","handleSubmit","event","preventDefault","date","Date","toTimeString","replace","newMessage","id","current","value","text","emit","map","m","background"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from 'react';\nimport { shade, lighten, desaturate, invert, getContrast } from \"polished\";\n\nimport socket from \"../../../../services/socket\";\n\nimport { Container, MessageContainer, Message, MessageUser, MessageText, MessageDate, InputGroup, InputText, LabelInput, InputMessage, SendButtonInput } from './styles';\n\nfunction Chat() {\n    const [messages, setMessages] = useState([]);\n    const [recivedMessage, setRecivedMessage] = useState(null);\n    const [myIdMessage, setMyIdMessage] = useState(0);\n    const [messageColor, setMessageColor] = useState('');\n    const [textColor, setTextColor] = useState('');\n    \n    const messageText = useRef();\n    const username = useRef();\n\n    useMemo(() => { \n        socket.on('recivedMessage', message => {\n            message.from = 'others';\n            setRecivedMessage(message);\n            console.log(message);\n\n        })\n    }, []);\n\n    useEffect(()=> {\n        if(recivedMessage) {\n            setMessages([...messages, recivedMessage]);\n            const messageDiv = document.getElementById('messageContainer');\n            messageDiv.scrollTop = messageDiv.scrollHeight;\n        }\n    },[recivedMessage]);\n\n    useEffect(()=> {\n        getRandomColor();\n    },[]);\n\n    function getRandomColor(){\n        let backgroundColor = '#'+(0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6)\n        backgroundColor = desaturate(0.2, (lighten(0.2, backgroundColor)));\n        let textColor = getConstrastColor(backgroundColor);\n\n        setMessageColor(backgroundColor);\n        setTextColor(textColor);\n    }\n\n    function getConstrastColor(color){\n        if(getContrast(color, '#fff') < 5.0) return '#3d3d3d';\n        else return '#dedede';\n    }\n\n    async function handleSubmit(event) {\n        event.preventDefault();\n\n        setMyIdMessage(myIdMessage-1);\n\n        const date = new Date().toTimeString().replace(/.*(\\d{2}:\\d{2}:\\d{2}).*/, \"$1\");;\n\n        const newMessage = {\n            from: 'my',\n            id: myIdMessage,\n            username: username.current.value,\n            text: messageText.current.value,\n            backgroundColor: messageColor,\n            textColor: textColor,\n            date,\n        }\n\n        setMessages([...messages, newMessage]);\n\n        socket.emit('sendMessage', newMessage);\n\n        messageText.current.value = '';\n    }\n\n    return (\n        <Container autoComplete=\"off\" onSubmit={handleSubmit}>\n\n            <InputGroup>\n                <LabelInput htmlFor=\"username\">Username</LabelInput>\n\n                <InputText\n                    id=\"username\"\n                    ref={username}\n                    required />\n            </InputGroup>\n\n            <MessageContainer id=\"messageContainer\">\n\n                {messages.map(m => (\n                    <Message className={m.from} key={m.id} \n                    style={{background: m.backgroundColor}}>\n                        <MessageText style={{color: m.textColor}}>\n                            <MessageUser>{m.username}:</MessageUser>\n                            {m.text}\n                        </MessageText>\n                        <MessageDate>{m.date}</MessageDate>\n                    </Message>\n                ))}\n\n            </MessageContainer>\n\n            <InputGroup>\n                <InputMessage\n                    id=\"message\"\n                    placeholder=\"Enviar mensagem...\"\n                    ref={messageText}\n                    required />\n\n                <SendButtonInput>Enviar</SendButtonInput>\n            </InputGroup>\n\n        </Container>\n    );\n}\n\nexport default Chat;"]},"metadata":{},"sourceType":"module"}